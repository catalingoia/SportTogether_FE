<div class="modal-header">
  <h4 class="modal-title">Create an event</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.dismiss('Cross click')"></button>
</div>
<div class="modal-body">
  <mat-stepper [linear]="true" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Sport, level and description</ng-template>
        <div>
          <div>Select a sport</div>
          <mat-form-field appearance="fill" class="mt-3 mb-3">
            <mat-label>Choose a sport:</mat-label>
            <select matNativeControl formControlName="sport" name="sport">
              <option *ngFor="let option of sports" [value]="option.value">
                {{option.viewValue}}
              </option>
            </select>
          </mat-form-field>
        </div>
        <div>
          <div>Select a level</div>
          <mat-form-field appearance="fill" class="mt-3 mb-3">
            <mat-label>Choose a level:</mat-label>
            <select matNativeControl formControlName="level" name="level">
              <option *ngFor="let option of levels" [value]="option.value">
                {{option.viewValue}}
              </option>
            </select>
          </mat-form-field>
        </div>
        <div>
          <div>Number of players</div>
          <mat-form-field appearance="fill" class="mt-3 mb-3">
            <mat-label>Number of players</mat-label>
            <input matInput type="number" formControlName="players" oninput="this.value=this.value.replace(/[^\d]/,'')"
                   min=0>
          </mat-form-field>
        </div>
        <div>
          <div>Description</div>
          <mat-form-field appearance="fill" class="mt-3 mb-3 w-75">
            <mat-label>Enter your description here:</mat-label>
            <textarea matInput cdkTextareaAutosize
                      formControlName="description"
                      cdkAutosizeMinRows="5">
                      </textarea>
          </mat-form-field>
        </div>
        <div>
          <button matStepperNext>Next</button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup" label="Fill out your address">
      <form [formGroup]="secondFormGroup">
        <ng-template matStepLabel>Date, time and location</ng-template>
        <div class="m-3">Select a date and a time for your event</div>

        <div class="d-flex m-3">

          <div>
            <mat-form-field appearance="fill" class="me-4">
              <mat-label>Choose a date</mat-label>
              <input matInput [matDatepicker]="datePicker">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
              <mat-datepicker #datePicker></mat-datepicker>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field appearance="fill">
              <mat-label>Choose a time</mat-label>
              <input matInput [ngxMatTimepicker]="picker">
              <ngx-mat-timepicker #picker></ngx-mat-timepicker>
            </mat-form-field>
          </div>
        </div>
        <div class="m-3 mt-5">
          <div class="mb-2">Select a location:</div>
          <div class="d-flex justify-content-center">
            <mat-spinner *ngIf="!mapLoaded">
            </mat-spinner>
          </div>
          <div *ngIf="mapLoaded | async">
            <agm-map [latitude]="latitude" [longitude]="longitude" (mapReady)="mapReadyHandler($event)">
              <agm-marker
                *ngIf="locationChosen"
                [latitude]="latitude"
                [longitude]="longitude"></agm-marker>
            </agm-map>
          </div>
        </div>
        <div>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext>Next</button>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Done</ng-template>
      <p>You are now done.</p>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="stepper.reset()">Reset</button>
      </div>
    </mat-step>
  </mat-stepper>
</div>

